# ü§ñ Telegram Keyword Monitor

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://python.org)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://docker.com)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

Ein intelligentes Python-Tool, das alle Telegram-Gruppen √ºberwacht, in denen Sie Mitglied sind, und Sie √ºber "Saved Messages" benachrichtigt, wenn definierte Keywords gefunden werden.

## üéØ Hauptfunktionen

- üîç **Echtzeit-√úberwachung** aller Telegram-Gruppen
- üí¨ **Telegram-Befehle** zur einfachen Verwaltung
- üö´ **Duplikat-Erkennung** verhindert mehrfache Benachrichtigungen
- üéõÔ∏è **Flexible Filterung** mit Whitelist/Blacklist
- üê≥ **Docker-Support** f√ºr einfaches Deployment
- üîí **Sicher** - Nur lesender Zugriff, keine automatischen Antworten

## Features

- ‚úÖ √úberwachung aller Gruppen/Kan√§le, in denen der Account Mitglied ist
- ‚úÖ Flexible Keyword-Definition (einfache Strings oder Regex)
- ‚úÖ **Keyword-Verwaltung direkt √ºber Telegram-Befehle**
- ‚úÖ Benachrichtigung √ºber Saved Messages mit Deep Links
- ‚úÖ Whitelist/Blacklist f√ºr Gruppen (auch √ºber Telegram steuerbar)
- ‚úÖ Session-Speicherung (kein wiederholter Login n√∂tig)
- ‚úÖ Umfassendes Logging
- ‚úÖ Konfigurierbare Nachrichtenl√§nge
- ‚úÖ Echtzeit-Konfiguration ohne Neustart

## üöÄ Schnellstart

### Option 1: Docker (Empfohlen)

1. **Repository klonen:**
   ```bash
   git clone https://github.com/yourusername/telegram-keyword-monitor.git
   cd telegram-keyword-monitor
   ```

2. **Konfiguration erstellen:**
   ```bash
   cp config.example.json config.json
   # Bearbeiten Sie config.json mit Ihren API-Credentials
   ```

3. **Starten:**
   ```bash
   ./start.sh
   ```

### Option 2: Lokale Installation

1. **Repository klonen:**
   ```bash
   git clone https://github.com/yourusername/telegram-keyword-monitor.git
   cd telegram-keyword-monitor
   ```

2. **Virtual Environment erstellen:**
   ```bash
   python3 -m venv telegram_monitor_env
   source telegram_monitor_env/bin/activate
   pip install -r requirements.txt
   ```

3. **Konfiguration:**
   ```bash
   cp config.example.json config.json
   # Bearbeiten Sie config.json mit Ihren Credentials
   ```

4. **Starten:**
   ```bash
   python3 main.py
   ```

## üîë API Credentials besorgen

1. Gehen Sie zu https://my.telegram.org
2. Loggen Sie sich mit Ihrer Telefonnummer ein
3. Gehen Sie zu "API development tools"
4. Erstellen Sie eine neue App
5. Notieren Sie sich `api_id` und `api_hash`
6. Tragen Sie diese in `config.json` ein

## Konfiguration

### config.json Struktur:

```json
{
  "telegram": {
    "api_id": "123456",
    "api_hash": "abcdef123456789",
    "session_name": "telegram_monitor"
  },
  "keywords": [
    "python",
    "telegram", 
    "(?i)machine learning",
    "(?i)AI|artificial intelligence"
  ],
  "settings": {
    "case_sensitive": false,
    "send_full_message": true,
    "max_message_length": 500
  },
  "groups": {
    "whitelist": [],
    "blacklist": ["Spam Group", "-1001234567890"]
  },
  "logging": {
    "enabled": true,
    "log_file": "keyword_monitor.log",
    "log_level": "INFO"
  }
}
```

### Konfigurationsoptionen:

#### Telegram
- `api_id`: Ihre Telegram API ID
- `api_hash`: Ihr Telegram API Hash  
- `session_name`: Name der Session-Datei (wird automatisch erstellt)

#### Keywords
Liste von Keywords als Strings. Unterst√ºtzt:
- **Einfache Strings:** `"python"`, `"telegram"`
- **Regex-Patterns:** `"(?i)AI|artificial intelligence"` (case-insensitive)
- **Komplexe Regex:** `"\\b(machine learning|ML)\\b"`

#### Einstellungen
- `case_sensitive`: Gro√ü-/Kleinschreibung beachten (Standard: false)
- `send_full_message`: Vollst√§ndige Nachricht senden oder k√ºrzen (Standard: true)
- `max_message_length`: Maximale Nachrichtenl√§nge bei K√ºrzung (Standard: 500)

#### Gruppen-Filter
- `whitelist`: Nur diese Gruppen √ºberwachen (leer = alle Gruppen)
  - Kann Gruppennamen oder Chat-IDs enthalten
- `blacklist`: Diese Gruppen ausschlie√üen
  - Kann Gruppennamen oder Chat-IDs enthalten

#### Logging
- `enabled`: Logging aktivieren (Standard: true)
- `log_file`: Pfad zur Log-Datei (Standard: "keyword_monitor.log")
- `log_level`: Log-Level (DEBUG, INFO, WARNING, ERROR)

## Verwendung

1. **Erstmalige Ausf√ºhrung:**
   ```bash
   source telegram_monitor_env/bin/activate
   python main.py
   ```
   Beim ersten Start werden Sie aufgefordert, Ihre Telefonnummer und einen Best√§tigungscode einzugeben.

2. **Regul√§re Ausf√ºhrung:**
   Nach dem ersten Login l√§uft das Tool automatisch, ohne erneute Anmeldung.

3. **Keywords √ºber Telegram verwalten:**
   √ñffnen Sie Ihre "Saved Messages" in Telegram und verwenden Sie folgende Befehle:
   
   ```
   /help              - Alle verf√ºgbaren Befehle anzeigen
   /keywords          - Aktuelle Keywords auflisten
   /add python        - Keyword hinzuf√ºgen
   /remove 1          - Keyword entfernen (per Nummer)
   /status            - Monitor-Status anzeigen
   ```

4. **Stoppen:**
   Dr√ºcken Sie `Ctrl+C` um das Tool zu beenden.

## Benachrichtigungen

Wenn ein Keyword gefunden wird, erhalten Sie eine Nachricht in Ihren "Saved Messages" mit folgenden Informationen:

- Gefundene Keywords
- Gruppenname
- Absender
- Zeitstempel
- Nachrichtentext (vollst√§ndig oder gek√ºrzt)
- Deep Link zur Original-Nachricht

**Beispiel-Benachrichtigung:**
```
üîç **Keyword Match Found!**

**Keywords:** python, telegram
**Group:** Python Developers
**Sender:** John Doe (@johndoe)
**Time:** 2024-01-15 14:30:25

**Message:**
Looking for help with python telegram bot development...

**Link:** https://t.me/c/1234567890/123
```

## Telegram-Befehle

Sie k√∂nnen Keywords und Einstellungen direkt √ºber Telegram verwalten, ohne die Konfigurationsdatei zu bearbeiten. Alle Befehle funktionieren in Ihren **"Saved Messages"**.

### üìù Keyword-Verwaltung

| Befehl | Beschreibung | Beispiel |
|--------|-------------|----------|
| `/keywords` | Alle Keywords anzeigen | `/keywords` |
| `/add <keyword>` | Keyword hinzuf√ºgen | `/add python` |
| `/remove <nummer\|keyword>` | Keyword entfernen | `/remove 1` oder `/remove python` |
| `/clear` | Alle Keywords l√∂schen | `/clear` |

### üè¢ Gruppen-Verwaltung

| Befehl | Beschreibung | Beispiel |
|--------|-------------|----------|
| `/groups` | Gruppen-Hilfe anzeigen | `/groups` |
| `/whitelist add <gruppe>` | Gruppe zur Whitelist | `/whitelist add Python Jobs` |
| `/whitelist list` | Whitelist anzeigen | `/whitelist list` |
| `/blacklist add <gruppe>` | Gruppe zur Blacklist | `/blacklist add Spam Group` |
| `/blacklist list` | Blacklist anzeigen | `/blacklist list` |

### ‚ÑπÔ∏è Status & Hilfe

| Befehl | Beschreibung |
|--------|-------------|
| `/status` | Monitor-Status und Statistiken anzeigen |
| `/help` | Alle verf√ºgbaren Befehle auflisten |

### üéØ Beispiele f√ºr Keyword-Befehle

**Einfache Keywords:**
```
/add python
/add telegram
/add job
/add freelancer
```

**Regex-Patterns (erweitert):**
```
/add (?i)machine learning
/add (?i)AI|artificial intelligence
/add (?i)react|vue|angular
/add \bjava\b
```

**Gruppen-Management:**
```
/whitelist add Python Developers
/blacklist add Spam Group
/whitelist list
/status
```

### üí° Vorteile der Telegram-Steuerung

- ‚úÖ **Keine Datei-Bearbeitung** mehr n√∂tig
- ‚úÖ **√Ñnderungen von √ºberall** (Handy, Desktop, Web)
- ‚úÖ **Sofortige Best√§tigung** der √Ñnderungen
- ‚úÖ **Echtzeit-Updates** ohne Neustart des Monitors
- ‚úÖ **Einfache Verwaltung** auch unterwegs

## Dauerhafte Ausf√ºhrung

### Mit systemd (Linux):

1. **Service-Datei erstellen:**
   ```bash
   sudo nano /etc/systemd/system/telegram-monitor.service
   ```

2. **Service-Konfiguration:**
   ```ini
   [Unit]
   Description=Telegram Keyword Monitor
   After=network.target

   [Service]
   Type=simple
   User=your-username
   WorkingDirectory=/path/to/telegram-monitor
   ExecStart=/usr/bin/python3 /path/to/telegram-monitor/main.py
   Restart=always
   RestartSec=10

   [Install]
   WantedBy=multi-user.target
   ```

3. **Service aktivieren:**
   ```bash
   sudo systemctl enable telegram-monitor.service
   sudo systemctl start telegram-monitor.service
   ```

### Mit Docker:

1. **Dockerfile erstellen:**
   ```dockerfile
   FROM python:3.11-slim
   WORKDIR /app
   COPY requirements.txt .
   RUN pip install -r requirements.txt
   COPY . .
   CMD ["python", "main.py"]
   ```

2. **Image bauen und starten:**
   ```bash
   docker build -t telegram-monitor .
   docker run -d --name telegram-monitor -v $(pwd)/config.json:/app/config.json telegram-monitor
   ```

## Troubleshooting

### H√§ufige Probleme:

1. **"Invalid API_ID or API_HASH"**
   - √úberpr√ºfen Sie Ihre Credentials in config.json
   - Stellen Sie sicher, dass api_id eine Zahl (ohne Anf√ºhrungszeichen) ist

2. **"Config file not found"**
   - Stellen Sie sicher, dass config.json im gleichen Verzeichnis wie main.py liegt

3. **"No keywords found"**
   - Verwenden Sie `/keywords` in Saved Messages um aktuelle Keywords zu sehen
   - F√ºgen Sie Keywords mit `/add <keyword>` hinzu
   - Testen Sie Regex-Patterns mit einem Online-Regex-Tester

4. **Session-Probleme**
   - L√∂schen Sie die .session-Datei und starten Sie neu
   - Bei wiederholten Problemen: Neuen session_name verwenden

5. **Befehle funktionieren nicht**
   - Stellen Sie sicher, dass Sie die Befehle in "Saved Messages" senden
   - Befehle m√ºssen mit `/` beginnen (z.B. `/help`)
   - Pr√ºfen Sie die Logs f√ºr Fehlermeldungen

### Logs √ºberpr√ºfen:
```bash
tail -f keyword_monitor.log
```

## üê≥ Docker Commands

```bash
# Starten
./start.sh

# Stoppen  
./stop.sh

# Logs anzeigen
docker-compose logs -f telegram-monitor

# Status pr√ºfen
docker-compose ps

# Neustart
docker-compose restart telegram-monitor
```

## üìÅ Projektstruktur

```
telegram-keyword-monitor/
‚îú‚îÄ‚îÄ main.py                 # Hauptanwendung
‚îú‚îÄ‚îÄ keyword_manager.py      # Telegram-Befehle
‚îú‚îÄ‚îÄ config.example.json     # Beispiel-Konfiguration
‚îú‚îÄ‚îÄ requirements.txt        # Python-Abh√§ngigkeiten
‚îú‚îÄ‚îÄ Dockerfile             # Docker-Container
‚îú‚îÄ‚îÄ docker-compose.yml     # Docker-Service
‚îú‚îÄ‚îÄ start.sh               # Start-Script
‚îú‚îÄ‚îÄ stop.sh                # Stop-Script
‚îú‚îÄ‚îÄ README.md              # Diese Datei
‚îî‚îÄ‚îÄ data/                  # Session-Dateien (wird erstellt)
    ‚îî‚îÄ‚îÄ logs/              # Log-Dateien (wird erstellt)
```

## ü§ù Contributing

1. Fork das Repository
2. Erstellen Sie einen Feature Branch (`git checkout -b feature/amazing-feature`)
3. Committen Sie Ihre √Ñnderungen (`git commit -m 'Add amazing feature'`)
4. Pushen Sie den Branch (`git push origin feature/amazing-feature`)
5. √ñffnen Sie einen Pull Request

## üîí Sicherheit

- **API-Credentials:** Teilen Sie niemals Ihre `api_id` und `api_hash`
- **Session-Dateien:** Sind verschl√ºsselt, aber halten Sie sie privat
- **Nur lesend:** Das Tool sendet keine Nachrichten in Gruppen, nur an sich selbst
- **Docker:** L√§uft als Non-Root User f√ºr zus√§tzliche Sicherheit

## üìÑ Lizenz

Dieses Projekt steht unter der MIT-Lizenz. Siehe [LICENSE](LICENSE) f√ºr Details.

## ‚ö†Ô∏è Disclaimer

Dieses Tool ist f√ºr den privaten Gebrauch bestimmt. Beachten Sie die Telegram-Nutzungsbedingungen und verwenden Sie es verantwortungsvoll.